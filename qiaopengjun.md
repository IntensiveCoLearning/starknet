---
timezone: Asia/Shanghai # ä¸­å›½æ ‡å‡†æ—¶é—´ (UTC+8)
---

> è¯·åœ¨ä¸Šè¾¹çš„ timezone æ·»åŠ ä½ çš„å½“åœ°æ—¶åŒºï¼Œè¿™ä¼šæœ‰åŠ©äºä½ çš„æ‰“å¡çŠ¶æ€çš„è‡ªåŠ¨åŒ–æ›´æ–°ï¼Œå¦‚æœæ²¡æœ‰æ·»åŠ ï¼Œé»˜è®¤ä¸ºåŒ—äº¬æ—¶é—´ UTC+8 æ—¶åŒº
> æ—¶åŒºè¯·å‚è€ƒä»¥ä¸‹åˆ—è¡¨ï¼Œè¯·ç§»é™¤ # ä»¥åçš„å†…å®¹

timezone: Pacific/Honolulu # å¤å¨å¤·-é˜¿ç•™ç”³æ ‡å‡†æ—¶é—´ (UTC-10)

timezone: America/Anchorage # é˜¿æ‹‰æ–¯åŠ æ ‡å‡†æ—¶é—´ (UTC-9)

timezone: America/Los_Angeles # å¤ªå¹³æ´‹æ ‡å‡†æ—¶é—´ (UTC-8)

timezone: America/Denver # å±±åœ°æ ‡å‡†æ—¶é—´ (UTC-7)

timezone: America/Chicago # ä¸­éƒ¨æ ‡å‡†æ—¶é—´ (UTC-6)

timezone: America/New_York # ä¸œéƒ¨æ ‡å‡†æ—¶é—´ (UTC-5)

timezone: America/Halifax # å¤§è¥¿æ´‹æ ‡å‡†æ—¶é—´ (UTC-4)

timezone: America/St_Johns # çº½èŠ¬å…°æ ‡å‡†æ—¶é—´ (UTC-3:30)

timezone: America/Sao_Paulo # å·´è¥¿åˆ©äºšæ—¶é—´ (UTC-3)

timezone: Atlantic/Azores # äºšé€Ÿå°”ç¾¤å²›æ—¶é—´ (UTC-1)

timezone: Europe/London # æ ¼æ—å¨æ²»æ ‡å‡†æ—¶é—´ (UTC+0)

timezone: Europe/Berlin # ä¸­æ¬§æ ‡å‡†æ—¶é—´ (UTC+1)

timezone: Europe/Helsinki # ä¸œæ¬§æ ‡å‡†æ—¶é—´ (UTC+2)

timezone: Europe/Moscow # è«æ–¯ç§‘æ ‡å‡†æ—¶é—´ (UTC+3)

timezone: Asia/Dubai # æµ·æ¹¾æ ‡å‡†æ—¶é—´ (UTC+4)

timezone: Asia/Kolkata # å°åº¦æ ‡å‡†æ—¶é—´ (UTC+5:30)

timezone: Asia/Dhaka # å­ŸåŠ æ‹‰å›½æ ‡å‡†æ—¶é—´ (UTC+6)

timezone: Asia/Bangkok # ä¸­å—åŠå²›æ—¶é—´ (UTC+7)

timezone: Asia/Shanghai # ä¸­å›½æ ‡å‡†æ—¶é—´ (UTC+8)

timezone: Asia/Tokyo # æ—¥æœ¬æ ‡å‡†æ—¶é—´ (UTC+9)

timezone: Australia/Sydney # æ¾³å¤§åˆ©äºšä¸œéƒ¨æ ‡å‡†æ—¶é—´ (UTC+10)

timezone: Pacific/Auckland # æ–°è¥¿å…°æ ‡å‡†æ—¶é—´ (UTC+12)

---

# {ä½ çš„åå­—}

1. è‡ªæˆ‘ä»‹ç»
    Qiao Pengjun ä¹”é¹å†›ã€‚æœ‰Pythonã€Goã€Rustã€solidityçš„å¼€å‘ç»éªŒã€‚å¤§çº¦æ˜¯å»å¹´å¼€å§‹äº†è§£Web3ï¼Œæœ€è¿‘åœ¨å­¦ä¹ solidityã€‚å¯¹åŒºå—é“¾æŠ€æœ¯å¾ˆæ„Ÿå…´è¶£ã€‚äº†è§£äº†ä¸€ç‚¹Solanaã€Suiã€Starknet... æ­£åœ¨ç»§ç»­å­¦ä¹ ã€‚å¸Œæœ›æœ¬æ¬¡å­¦ä¹ èƒ½è®©æˆ‘æ›´æ·±å…¥çš„äº†è§£Web3ã€‚æ‹¥æŠ±Web3ï¼Œæ‹¥æŠ±æœªæ¥ã€‚

2. ä½ è®¤ä¸ºä½ ä¼šå®Œæˆæœ¬æ¬¡æ®‹é…·å­¦ä¹ å—ï¼Ÿ
   æˆ‘è®¤ä¸ºæˆ‘ä¼šå®Œæˆæœ¬æ¬¡æ®‹é…·å­¦ä¹ ï¼Œå› ä¸ºæˆ‘æœ‰ä¿¡å¿ƒï¼Œå¹¶ä¸”æˆ‘ç›¸ä¿¡æˆ‘èƒ½å¤Ÿå…‹æœä»»ä½•å›°éš¾ã€‚

## Notes

<!-- Content_START -->

### 2024.09.18

[The Starknet Book](https://book.starknet.io/index.html)

Starkli Installation

```shell
curl https://get.starkli.sh | sh
starkliup
```

Restart your terminal and confirm installation:

```shell
starkli --version
```

To upgrade Starkli, simply repeat the steps.

<https://book.starknet.io/ch02-01-basic-installation.html>

```shell
scarb --version
katana --version
```

å®æ“

```shell
starknet on î‚  main [!] via ğŸ…’ base
âœ
      scarb --version  # For Cairo code compilation
    starkli --version  # To interact with Starknet
    katana --version # To declare and deploy on local development

scarb 2.6.5 (d49f54394 2024-06-11)
cairo: 2.6.4 (https://crates.io/crates/cairo-lang-compiler/2.6.4)
sierra: 1.5.0

0.3.4 (9f6ea67)
katana 0.7.4
```

### 2024.09.19

éƒ¨ç½²åˆçº¦å‰ä¸€å®šè¦å…ˆéƒ¨ç½²é’±åŒ…è´¦æˆ·ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚
<https://docs.starknet.io/quick-start/set-up-an-account/>

 Cairo  åœ¨ `Starknet` æ™ºèƒ½åˆçº¦ä¸­æ€ä¹ˆå†™ï¼Ÿ

- éœ€è¦å®šä¹‰ä¸€ä¸ªæ¨¡å— mod
- éœ€è¦ä½¿ç”¨å±æ€§ `#[starknet::contract]`
- è¿™ç§ç¼–ç¨‹ç±»å‹è¢«ç§°ä¸ºå…ƒç¼–ç¨‹
- å±æ€§æ˜¯å®
- å®çš„ä½œç”¨æ˜¯æ¶ˆè€—ä½ åœ¨å®ä¸‹å®šä¹‰çš„ä»£ç ï¼Œå¹¶è½¬æ¢ä¸ºå…¶å®ƒä»£ç 
- åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè½¬åŒ–æ˜¯å°†æ¨¡å—è½¬æ¢ä¸ºæ™ºèƒ½åˆçº¦ï¼Œæ‰€ä»¥è¿™å°±æ˜¯æ‰€è°“çš„å…ƒç¼–ç¨‹
- å…ƒç¼–ç¨‹åœ¨Rustå½“ä¸­æµè¡Œèµ·æ¥ã€åŒæ ·ä¹Ÿåœ¨ cairo ä¸­ä½¿ç”¨ï¼Œåªæ˜¯ä½¿ç”¨äº†ä¸åŒçš„å®æˆ–å±æ€§
- å½“æˆ‘ä»¬æƒ³è¦å®šä¹‰åˆçº¦çš„å­˜å‚¨æ—¶ï¼Œå®é™…ä¸Šæ˜¯å®šä¹‰äº†ä¸€ä¸ªç»“æ„ä½“ï¼Œè¿™ä¸ªç»“æ„ä½“å¿…é¡»å« `Storage`
- è¿™ä¸ªå­˜å‚¨å¿…é¡»ä½¿ç”¨å±æ€§   `#[storage]` æ¥æ³¨è§£
- åœ¨ trait ä¸­å¿…é¡»ä¸º self å®šä¹‰ç±»å‹

### 2024.09.20

protostar
installed

```shell
curl -L https://raw.githubusercontent.com/software-mansion/protostar/master/install.sh | bash


Detected your preferred shell is zsh and added Protostar to PATH. Run 'source /Users/qiaopengjun/.zshrc' or start a new terminal session to use Protostar.
Then, run 'protostar --help'.


source /Users/qiaopengjun/.zshrc
protostar --help

protostar -v
Protostar version: 0.14.0
Cairo-lang version: 0.11.2
Cairo 1 compiler version: 1.1.0
22:55:11 [INFO] Execution time: 1.78 s
```

<https://www.youtube.com/watch?v=30gk2v2gXyo&list=PLKhUlfTgU76DVMLsoGD8C30pCWh66peRC>
<https://www.youtube.com/watch?v=NzXvkiSuwR0&list=PLthnZsjX96VjbSvvdKf1cyx5lBWU9mnJ7&index=3>

### 2024.09.21

remix ç¬¬ä¸€æ¬¡éƒ¨ç½²è°ƒç”¨åˆçº¦æˆåŠŸï¼Œç¬¬äºŒæ¬¡æ— æ³•ç‚¹å‡» Declareï¼Œ è°ƒç”¨åˆçº¦å¤±è´¥ï¼Œ æ¢äº†æµè§ˆå™¨å¯ä»¥æˆåŠŸã€‚
çŒœæµ‹åŸå› æ˜¯ç¼“å­˜é—®é¢˜ï¼Œ æ¸…ç†ç¼“å­˜åå¯ä»¥æˆåŠŸã€‚
<https://www.youtube.com/watch?v=qrnbf2Ji-oU>

STARKWARE ï¼šæ˜¯ä½äºä»¥è‰²åˆ—çš„å…¬å¸ï¼Œå¼€å‘äº† Starknetï¼ŒåŒ…æ‹¬ Starknet ç›¸å…³çš„æŠ€æœ¯ï¼Œç›®å‰è´Ÿè´£æ„å»ºå’Œå‘å±•ï¼Œ Starknet çš„æ ¸å¿ƒå›¢é˜Ÿæ˜¯ Starkware çš„å‘˜å·¥ã€‚ Starkware çš„åˆ›å§‹äººåŠç°ä»»çš„CEO å‘æ˜äº† Starks ZK

çš„è¯æ˜ï¼Œè¿™ç§è¯æ˜æ¨åŠ¨äº†æ‰€æœ‰è¿™äº›åˆ›æ–°ã€‚ STARKWARE åšçš„ç¬¬ä¸€ä¸ª ZKSTARKS çš„å®ç°è¢«ç§°ä¸º STARKExï¼ŒSTARKEx æ˜¯ä¸€ä¸ªéœ€è¦æˆæƒçš„ç³»ç»Ÿï¼Œæ‰€ä»¥ä½ ä¸èƒ½ç›´æ¥ä½¿ç”¨STARKExï¼Œä½ éœ€è¦ä¸ STARKWARE ç­¾è®¢åˆåŒåè®®æ‰èƒ½ä½¿ç”¨å®ƒã€‚STARKEx æœ‰ä¸€äº›å›ºå®šçš„åŠŸèƒ½ï¼Œæ¯”å¦‚è¯´ä½ å¯ä»¥äº¤æ˜“ä»£å¸ï¼ŒåšæœŸè´§åˆçº¦ã€èµ„äº§äº¤æ˜“ç­‰å¾…ã€‚ä¾‹å¦‚ï¼šDYDXVERSION3 å®é™…å°±æ˜¯è¿è¡Œåœ¨ STARKEx ä¸Šçš„ã€‚è®¸å¤šåº”ç”¨ç¨‹åºå¹•åéƒ½æ˜¯ä½¿ç”¨çš„æ˜¯STARKExã€‚ è¿™æ˜¯ STARKWARE å¼€å‘çš„ç¬¬ä¸€ä¸ªäº§å“ã€‚

å®é™…ä¸ŠCairo å°±æ˜¯ä¸º STARKEx å¼€å‘çš„ã€‚æœ€åˆæ˜¯ä½œä¸ºä¸€ç§å†…éƒ¨å·¥å…·ï¼Œä»¥ä¾¿æ›´å®¹æ˜“æé«˜ç³»ç»Ÿçš„èƒ½åŠ›ï¼Œä¸€æ®µæ—¶é—´ä»¥åï¼Œå®ƒä»¬å¸Œæœ›åˆ›å»ºä¸€ç§ç³»ç»Ÿï¼Œä½¿ç”¨ç›¸åŒçš„æŠ€æœ¯ã€ç›¸åŒç±»å‹çš„é›¶çŸ¥è¯†è¯æ˜ï¼Œä½¿å¾—äººä»¬å¯ä»¥è‡ªå·±ä½¿ç”¨ Cairo åˆ›å»ºæ™ºèƒ½åˆçº¦ï¼Œå¹¶éšæ—¶éƒ¨ç½²å®ƒä»¬ï¼Œæ— é¡»ä»»ä½•è®¸å¯ã€‚è¿™å°±æ˜¯ STARKNETã€‚å› æ­¤ STARKNETæ˜¯ä¸€ä¸ªæ— éœ€è®¸å¯çš„ç³»ç»Ÿã€‚æ˜¯ä¸€ä¸ªäºŒå±‚æ±‡æ€»ã€‚ä½¿ç”¨ä»¥å¤ªåŠä½œä¸ºå®‰å…¨å±‚ï¼Œä½ å¯ä»¥é€šè¿‡æ™ºèƒ½åˆçº¦éƒ¨ç½²ä½ çš„ä»£ç é€»è¾‘ï¼Œæ— éœ€å¾—åˆ° STARKWARE çš„ä»»ä½•è®¸å¯ã€‚

STARKNET Foundation ï¼š STARKNET åŸºé‡‘ä¼šæ˜¯æˆç«‹å¤§çº¦ä¸€å¹´çš„ä¸€ä¸ªéè¥åˆ©ç»„ç»‡ã€‚ç›®æ ‡æ˜¯å¸®åŠ©å‘å±• STARKNET ç”Ÿæ€ç³»ç»Ÿï¼Œæˆ–è€…ä¸ä¸€äº›å¼€å‘è€…è¾¾æˆåè®®æ¥åˆ›å»ºä¸€äº›åº”ç”¨ï¼Œæˆ–è€…å¸®åŠ©åˆ†æ•£ç³»ç»Ÿçš„æ²»ç†ã€‚

### 2024.09.22

cairo ç‰¹å¾
åˆ›å»ºå¯è¯æ˜çš„ç¨‹åº è®¡ç®—çš„å®Œæ•´æ€§
åœ¨ CairoVM ä¸Šè¿è¡Œ
ç±»ä¼¼ Rust çš„è¯­æ³•
ç›¸ä¼¼çš„æ‰€æœ‰æƒæ¨¡å‹
å¼ºç±»å‹ traits macros
ä¸ä¸“ä¸ºæ™ºèƒ½åˆçº¦è®¾è®¡
ä¸éœ€è¦äº†è§£ ZK
å¼ºç±»å‹çš„è¯­è¨€
é€šç”¨è¯­è¨€
ç›®å‰çš„ä¸»è¦ç”¨ä¾‹æ˜¯ä¸º STARKNET åˆ›å»ºæ™ºèƒ½åˆçº¦
åˆ©ç”¨äº†é›¶çŸ¥è¯†è¯æ˜
Cairo å°±æ˜¯ä¸€ç§é«˜çº§è¯­è¨€ã€å¼ºç±»å‹ã€éå¸¸çµæ´»ã€éå¸¸ç±»ä¼¼äº Rustï¼Œä½†æ˜¯å¹¶ä¸å®Œå…¨ç›¸åŒ

Cairo åœ¨ Starknet æ™ºèƒ½åˆçº¦ä¸­æ€ä¹ˆå†™ï¼Ÿ
éœ€è¦å®šä¹‰ä¸€ä¸ªæ¨¡å— mod
éœ€è¦ä½¿ç”¨å±æ€§ #[starknet::contract]
è¿™ç§ç¼–ç¨‹ç±»å‹è¢«ç§°ä¸ºå…ƒç¼–ç¨‹
å±æ€§æ˜¯å®
å®çš„ä½œç”¨æ˜¯æ¶ˆè€—ä½ åœ¨å®ä¸‹å®šä¹‰çš„ä»£ç ï¼Œå¹¶è½¬æ¢ä¸ºå…¶å®ƒä»£ç 
åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè½¬åŒ–æ˜¯å°†æ¨¡å—è½¬æ¢ä¸ºæ™ºèƒ½åˆçº¦ï¼Œæ‰€ä»¥è¿™å°±æ˜¯æ‰€è°“çš„å…ƒç¼–ç¨‹
å…ƒç¼–ç¨‹åœ¨Rustå½“ä¸­æµè¡Œèµ·æ¥ã€åŒæ ·ä¹Ÿåœ¨ cairo ä¸­ä½¿ç”¨ï¼Œåªæ˜¯ä½¿ç”¨äº†ä¸åŒçš„å®æˆ–å±æ€§
å½“æˆ‘ä»¬æƒ³è¦å®šä¹‰åˆçº¦çš„å­˜å‚¨æ—¶ï¼Œå®é™…ä¸Šæ˜¯å®šä¹‰äº†ä¸€ä¸ªç»“æ„ä½“ï¼Œè¿™ä¸ªç»“æ„ä½“å¿…é¡»å« Storage
è¿™ä¸ªå­˜å‚¨å¿…é¡»ä½¿ç”¨å±æ€§ #[storage] æ¥æ³¨è§£
åœ¨ trait ä¸­å¿…é¡»ä¸º self å®šä¹‰ç±»å‹

```rust
#[starknet::interface]
trait ISimpleStorage<TContractState> {
  // å½“ä½ æœ‰ä¸€ä¸ªæ–¹æ³•å®é™…ä¸Šæƒ³ä¿®æ”¹æ™ºèƒ½åˆçº¦å†…éƒ¨çŠ¶æ€æ—¶ï¼Œä½ éœ€è¦ä¼ é€’æ™ºèƒ½åˆçº¦çš„çŠ¶æ€ï¼Œself å‚æ•°ä½œä¸ºå¼•ç”¨ ref
  fn set(ref self: TContractState, x: u128);
  // å¦‚æœä»çŠ¶æ€ä¸­åªè¯»è€Œä¸ä¿®æ”¹ å¯ä»¥è¯·æ±‚çŠ¶æ€ä½œä¸ºå¿«ç…§ä½œä¸ºä¼ é€’  å¿«ç…§ä½¿ç”¨ @ ç¬¦å·
  fn get(self: @TContractState) -> u128;
}

#[starknet::contract]
mod SimpleStorage {
  #[storage]
  struct Storage {
    stored_data: u128
  }
  
  // ä»¥ä¸‹å®ç°å°†æˆä¸ºæ™ºèƒ½åˆçº¦çš„ ABI ï¼Œæ‰€ä»¥è¿™æ˜¯ä»»ä½•äººéƒ½å¯ä»¥è°ƒç”¨çš„æ™ºèƒ½åˆçº¦çš„å…¬å…±æ¥å£
  #[abi(embed_v0)]
  impl SimpleStorage of super::ISimpleStorage<ContractState> {
    fn set(ref self: ContractState, x: u128) {
      self.stored_data.write(x);
    }
    
    fn get(self: @ContractState) -> u128 {
      self.stored_data.read()
    }
  }
}
```

### 2024.09.23

L1 æœ€ç»ˆç¡®è®¤
ä»¥å¤ªåŠçš„æœ€ç»ˆç¡®è®¤å¤§çº¦æ˜¯æ¯6åˆ†é’Ÿå®ç°ä¸€æ¬¡

åœ¨ä¹è§‚æ±‡æ€»ä¸­ï¼Œä» L2 æå–èµ„é‡‘åˆ° L1ï¼Œå¤§çº¦éœ€è¦ä¸€å‘¨çš„æ—¶é—´

åœ¨ Starknet çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªç­‰å¾…æ—¶é—´åªæœ‰2ä¸ªå°æ—¶

æ¯2ä¸ªå°æ—¶å°±ä» Starknet å‘é€æœ‰æ•ˆæ€§è¯æ˜åˆ° L1

ä¸€æ—¦è¯æ˜è¢«éªŒè¯ï¼Œä½ å°±å¯ä»¥å°†èµ„é‡‘è½¬ç§»åˆ° L1

L2 çš„æœ€ç»ˆç¡®è®¤ä¹Ÿå°±æ˜¯ Starknet çš„æœ€ç»ˆç¡®è®¤éå¸¸çŸ­

ç›®å‰å¤§çº¦ä¸‰ç§’é’Ÿï¼Œå› æ­¤ç¡®è®¤äº¤æ˜“çš„é€Ÿåº¦éå¸¸å¿«

åªæœ‰åœ¨ä½ æƒ³è¦å°†èµ„äº§å–å›åˆ° L1 æ—¶ï¼Œæ‰éœ€è¦ç­‰å¾…ä¸¤ä¸ªå°æ—¶

ä¸ä¹è§‚æ±‡æ€»ç›¸æ¯”ï¼Œåœ¨è¿™æ–¹é¢æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ä¼˜åŠ¿

æ™ºèƒ½é’±åŒ…çš„å¥½å¤„åœ¨äºä½ è·å¾—äº†æ¯”æ™®é€šé’±åŒ…æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œå¯ä»¥è¿›è¡Œå¤šæ¬¡è°ƒç”¨ç¡¬ä»¶ç­¾ç½²æ¥æ¢å¤ä¼šè¯ç§˜é’¥ã€‚æ‰€æœ‰è¿™äº›éƒ½æ˜¯ç”±è´¦æˆ·æŠ½è±¡å®ç°çš„ã€‚å³å°†ç­¾ç½²è€…ä¸è´¦æˆ·åˆ†ç¦»ã€‚

è´¦æˆ·æ˜¯ä¸€ä¸ªå…·æœ‰ç‰¹å®šæ¥å£çš„æ™ºèƒ½åˆçº¦ã€‚

å› æ­¤æ¯æ¬¡åˆ›å»ºè´¦æˆ·æ—¶ï¼Œä½ éƒ½æœ‰ç­¾ç½²è€…å’Œ Starknet ä¸Šçš„è´¦æˆ·åˆçº¦ã€‚

å®ƒæ”¯æŒä½¿ç”¨ä¸åŒçš„æ¤­åœ†æ›²çº¿è¿›è¡Œç­¾å

åœ¨ Starknet ä¸Šæ¯ä¸ªé’±åŒ…éƒ½æ˜¯æ™ºèƒ½é’±åŒ…ï¼Œæ²¡æœ‰å¤–éƒ¨è´¦æˆ·ï¼ˆEOAï¼‰

### 2024.09.24

é—®é¢˜ï¼š

```shell
hellostarknet on î‚  main [?] via ğŸ…’ base took 4.7s 
âœ scarb test 
     Running test hellostarknet (snforge test)
   Compiling snforge_scarb_plugin v0.1.0 (git+https://github.com/foundry-rs/starknet-foundry?tag=v0.30.0#196f06b251926697c3d66800f2a93ae595e76496)
    Finished `release` profile [optimized] target(s) in 0.17s
   Compiling test(hellostarknet_unittest) hellostarknet v0.1.0 (/Users/qiaopengjun/Code/starknet-code/hello_starknet/hellostarknet/Scarb.toml)
   Compiling test(hellostarknet_integrationtest) hellostarknet_integrationtest v0.1.0 (/Users/qiaopengjun/Code/starknet-code/hello_starknet/hellostarknet/Scarb.toml)
    Finished release target(s) in 8 seconds
   Compiling snforge_scarb_plugin v0.1.0 (git+https://github.com/foundry-rs/starknet-foundry?tag=v0.30.0#196f06b251926697c3d66800f2a93ae595e76496)
    Finished `release` profile [optimized] target(s) in 0.16s
   Compiling hellostarknet v0.1.0 (/Users/qiaopengjun/Code/starknet-code/hello_starknet/hellostarknet/Scarb.toml)
    Finished release target(s) in 4 seconds
[ERROR] Error while compiling Sierra. Make sure you have the latest universal-sierra-compiler binary installed. Contact us if it doesn't help: Command universal-sierra-compiler failed with status exit status: 2
```

è§£å†³ï¼š

```shell
cargo install universal-sierra-compiler --force
```

`sncast` å’Œ `starkli` éƒ½å¯ä»¥ç”¨æ¥ä¸ Starknet äº¤äº’ï¼Œä½†å®ƒä»¬çš„ç”¨é€”ç•¥æœ‰ä¸åŒï¼Œå…·ä½“é€‰æ‹©å–å†³äºä½ çš„å·¥ä½œæµå’Œé¡¹ç›®éœ€æ±‚ã€‚ä¸‹é¢æ˜¯å®ƒä»¬çš„åŒºåˆ«ï¼š

### 1. **sncast**

`sncast` æ˜¯ Starknet Foundry å·¥å…·çš„ä¸€éƒ¨åˆ†ï¼Œé€šå¸¸ä¸ Foundry é›†æˆä½¿ç”¨ï¼Œå®ƒä¸“æ³¨äº Starknet çš„å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²ã€‚å®ƒçš„ä¸»è¦ç”¨é€”åŒ…æ‹¬ï¼š

- **åˆçº¦å£°æ˜**ï¼šæ”¯æŒå£°æ˜åˆçº¦ï¼ˆDeclareï¼‰ï¼Œå¹¶ä¸”ä¸ Foundry æ— ç¼é›†æˆã€‚
- **éƒ¨ç½²å’Œè°ƒç”¨åˆçº¦**ï¼šæä¾›ç±»ä¼¼äº Ethereum ä¸Š `cast` çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºéƒ¨ç½²ã€è°ƒç”¨åˆçº¦ä»¥åŠå…¶ä»–é“¾ä¸Šäº¤äº’ã€‚
- **å¼€å‘å·¥å…·é“¾**ï¼šä¸“æ³¨äºå¼€å‘è€…å·¥å…·ï¼Œç‰¹åˆ«æ˜¯åœ¨ Solidity å’Œ Starknet å¼€å‘è€…çš„å·¥ä½œæµä¸­å¾ˆæœ‰ç”¨ã€‚

`sncast` é€‚åˆé‚£äº›å·²ç»ç†Ÿæ‚‰ Foundry å¼€å‘ç¯å¢ƒå¹¶å¸Œæœ›é›†æˆ Starknet å·¥ä½œæµçš„äººç¾¤ã€‚

### 2. **starkli**

`starkli` æ˜¯ Starkware çš„å®˜æ–¹å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºç›´æ¥ä¸ Starknet äº¤äº’ã€‚å®ƒçš„ä¸»è¦ç”¨é€”åŒ…æ‹¬ï¼š

- **åˆçº¦å£°æ˜å’Œéƒ¨ç½²**ï¼šé€šè¿‡ `declare` å’Œ `deploy` å‘½ä»¤æ¥å£°æ˜å’Œéƒ¨ç½² Cairo åˆçº¦ã€‚
- **åˆçº¦è°ƒç”¨**ï¼šèƒ½å¤ŸæŸ¥è¯¢ã€è°ƒç”¨å·²ç»éƒ¨ç½²çš„åˆçº¦å‡½æ•°ã€‚
- **å®˜æ–¹å·¥å…·é“¾**ï¼š`starkli` æ˜¯ç”± Starkware å®˜æ–¹æä¾›çš„å·¥å…·ï¼ŒåŠŸèƒ½å…¨é¢ä¸”é€‚åˆä¸ Starknet è¿›è¡Œä½çº§åˆ«äº¤äº’ã€‚å®ƒå¯¹äºé‚£äº›ä½¿ç”¨ Cairo å¼€å‘åˆçº¦å¹¶ç›´æ¥éƒ¨ç½²åˆ° Starknet ä¸Šçš„ç”¨æˆ·ç‰¹åˆ«æœ‰ç”¨ã€‚

`starkli` æ›´é€‚åˆäºæƒ³è¦ä½¿ç”¨ Starknet å®˜æ–¹å·¥å…·é“¾å¹¶ç›´æ¥ä¸ç½‘ç»œäº¤äº’çš„ç”¨æˆ·ã€‚

### ä¸ºä»€ä¹ˆä½ çœ‹åˆ°ä¸¤ä¸ªæ•™ç¨‹ï¼Ÿ

ä¸åŒçš„æ•™ç¨‹å¯èƒ½é¢å‘ä¸åŒçš„å¼€å‘è€…å·¥ä½œæµï¼š

- å¦‚æœä½ ä¸»è¦æ˜¯ä½¿ç”¨ Foundry æˆ–è€…å·²ç»ç†Ÿæ‚‰ä»¥å¤ªåŠå¼€å‘å·¥å…·é“¾ï¼Œé‚£ä¹ˆ `sncast` æ˜¯ä¸€ç§æ–¹ä¾¿çš„é€‰æ‹©ã€‚
- å¦‚æœä½ æ›´æ¥è¿‘ Starkware å®˜æ–¹å·¥å…·é“¾ï¼Œæˆ–è€…ä½ åªä¸“æ³¨äº Cairo å’Œ Starknetï¼Œé‚£ä¹ˆ `starkli` å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚

### å¦‚ä½•é€‰æ‹©ï¼Ÿ

- å¦‚æœä½ åå‘äºä½¿ç”¨ Solidity ä¸ Starknet è¿›è¡Œäº¤äº’ï¼Œæˆ–è€…å·²ç»ä¹ æƒ¯äº† Foundry çš„å¼€å‘å·¥å…·é“¾ï¼Œ**é€‰æ‹© `sncast`**ã€‚
- å¦‚æœä½ æ˜¯ Cairo å¼€å‘è€…ï¼Œæƒ³è¦ä½¿ç”¨ Starknet çš„å®˜æ–¹å·¥å…·é“¾ï¼Œ**é€‰æ‹© `starkli`**ã€‚

ä½ å¯ä»¥æ ¹æ®ä¸ªäººå¼€å‘ç¯å¢ƒå’Œé¡¹ç›®éœ€æ±‚é€‰æ‹©é€‚åˆçš„å·¥å…·ã€‚

### 2024.09.25

Cairo æ˜¯ä¸€ç§å¯è¯æ˜çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒçš„è¯­æ³•ç±»ä¼¼äºRustã€‚Cairo ä¸ç›´æ¥ç¼–è¯‘ä¸º Cairo AM å­—èŠ‚ç 

è¿™ä¸ªç¼–è¯‘è¿‡ç¨‹æ˜¯ç”±æ’åºå™¨ Sequencer å®Œæˆçš„

Sierra ç¡®ä¿å³ä½¿äº¤æ˜“å¤±è´¥ï¼Œå®ƒä¹Ÿä¼šä»¥ä¸€ç§ä¸å¯è¯æ˜ç³»ç»Ÿå…¼å®¹çš„æ–¹å¼å¤±è´¥ï¼Œå¦‚æœä¸è¿™æ ·åšä¼šæœ‰ä¸€ä¸ªæ‹’ç»æœåŠ¡çš„æ¼æ´ã€‚

Sierra å…è®¸ Cairo VM å’Œ å­—èŠ‚ç ç‹¬ç«‹äº Cairo è¯­è¨€æœ¬èº«çš„æ¼”å˜

å› æ­¤æˆ‘ä»¬å¯ä»¥å¯¹ä¸¤ç«¯è¿›è¡Œä¿®æ”¹ã€è€Œä¸å¿…ä¿®æ”¹æ•´ä¸ªç³»ç»Ÿ

è¯æ˜è€…ä¼šè¾“å‡ºæœ‰æ•ˆæ€§è¯æ˜å’Œè®¡ç®—ç»“æœ

æ’åºå™¨ä½œä¸º Starknet ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹

Cairo Program
Compile Sierra
Send Sequencer
Sequencer compile CASM (Sierra)
Run Cairo VM
Prover (SHARP) RUN trace
validity proof ä½œä¸ºä¸€ä¸ªäº¤æ˜“å‘é€åˆ° ä»¥å¤ªåŠ Ethereum è¿›è¡Œ Verifier
result

å£°æ˜å’Œéƒ¨ç½²æ˜¯Starknet ä¸Šä¸¤ä¸ªä¸åŒçš„æ“ä½œ

å£°æ˜æ™ºèƒ½åˆçº¦åªæ˜¯åœ¨ Starknet ä¸Šæ³¨å†Œä»£ç 

æ–°çš„ä»£ç åªéœ€è¦å£°æ˜ä¸€æ¬¡

å¦‚æœä»£ç å·²ç»å£°æ˜è¿‡ï¼Œä½ ä¸éœ€è¦é‡æ–°å£°æ˜

å£°æ˜çš„æ™ºèƒ½åˆçº¦ç§°ä¸ºåˆçº¦ç±»

åˆçº¦ç±»æ˜¯ç”¨æ¥æ´¾ç”Ÿæ™ºèƒ½åˆçº¦å®ä¾‹çš„è“å›¾

åˆçº¦ç±»ç”±ç±»å“ˆå¸Œå€¼æ ‡è¯†ï¼Œåˆçº¦ç±»æ˜¯çº¯ä»£ç ï¼Œæ²¡æœ‰å†…éƒ¨å­˜å‚¨ï¼Œä»…ä»…æ˜¯è“å›¾ï¼Œä¸ç”¨äºç›´æ¥è°ƒç”¨æˆ–äº¤æ˜“

è¦éƒ¨ç½²åˆçº¦ç±»çš„å®ä¾‹ï¼Œä½ éœ€è¦ä»åˆçº¦ç±»æ´¾ç”Ÿå®ƒå¹¶æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œç„¶åå¾—åˆ°ä¸€ä¸ªæ™ºèƒ½åˆçº¦å®ä¾‹ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬é€šå¸¸æŒ‡çš„æ™ºèƒ½åˆçº¦ã€‚

æ™ºèƒ½åˆçº¦æœ‰å†…éƒ¨å­˜å‚¨ã€è¿™ä¸ªåˆçº¦å®ä¾‹ç”±å…¶åœ°å€æ ‡è¯†ï¼Œä»åŒä¸€ä¸ªåˆçº¦ç±»æˆ–ä»£ç ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨æ„é€ å‡½æ•°éƒ¨ç½²å¤šä¸ªå®ä¾‹ã€‚å®ƒä»¬å°†æ‹¥æœ‰ä¸åŒçš„åœ°å€ã€‚å³ä½¿å®ƒä»¬æºè‡ªåŒä¸€ä¸ªåˆçº¦ç±»ï¼Œä½†å­˜å‚¨æ˜¯ä¸åŒçš„ã€‚

```rust
const ONE_HOUR_IN_SECONDS: u32 = 3600;

#[derive(Drop)]
struct Rectangle {
    width: u64,
    height: u64
}

#[derive(Drop)]
struct Rectangle1<T> {
    width: T,
    height: T
}

trait RectangleTrait {
    fn area(self: @Rectangle) -> u64;
}

trait RectangleTrait1<T> {
    fn area(self: @Rectangle1<T>) -> T;
}

impl RectangleImpl1<T, +Mul<T>, +Copy<T>> of RectangleTrait1<T> {
    fn area(self: @Rectangle1<T>) -> T {
        *self.width * *self.height
    }
}

fn main() {
    let mut x = 5;
    println!("Hello, world! {}", x);

    x = 6;
    println!("Hello, world! {}", x);

    println!("ONE_HOUR_IN_SECONDS is {ONE_HOUR_IN_SECONDS}");

    let mut y: u16 = 10;
    y = y / 2;
    println!("y is {y}");

    let z: u256 = 10;
    let l = 5_u8;
    println!("z is {z} and l is {l}");
    println!("z + l is {}", z + l.into());
    println!("l / y is {}", l / y.try_into().unwrap());

    let x = 'Hello World';
    println!("x is {x}"); // x is 87521618088882533792115812

    let x = 25_u16;
    println!("{}", format!("https://example.com/{}", x));

    let y: ByteArray = "Hello World";
    println!("y is {y}");
    println!("{y:?}");

    println!("{}", sum_three(1, 2, 3));

    println!("{}", min(1, 2));
    println!("{}", min2(1, 2, 3));
    println!("fib: {}", fib(1, 2, 5));

    let a = array![1, 2, 3, 4, 5];
    println!("sum_array! {}", sum_array(a));
    // println!("Arr Len is {}", a.len());  error: Variable was previously moved.

    let (a, b, c) = (1, 2, 3);
    println!("sum_three: {}", sum_three(a, b, c));
    println!("A is {a}");

    let arr = array![1, 2, 3, 4, 5];
    // println!("arr len is {}", return_len(@arr));
    println!("arr len is {}", return_len(arr.span()));
    // println!("arr len {}", arr.len());  error: Variable was previously moved.
    println!("arr len {}", arr.len());
    // å¿«ç…§ä¼ å‚ @ ä¼šè·å¾—å˜é‡çš„ä¸å¯å˜å¼•ç”¨
    // å¯å˜å¼•ç”¨ä¼ å‚

    println!("sum_array2: {}", sum_array2(arr.span()));

    let mut arr = array![1, 2, 3, 4];
    println!("sum_array3: {}", sum_array3(ref arr));
    println!("arr len is {}", arr.len());

    let rectangle = Rectangle { width: 30, height: 50 };
    let area = area(@rectangle);
    println!("area is {}", area);
    println!(
        "Width is {}", rectangle.width
    ); // Variable not dropped.  Variable was previously moved.

    println!("Rectangle is {}", rectangle);

    println!("Area is {}", rectangle.area());
    let rectangle1 = Rectangle1 { width: 30_u32, height: 50 };
    println!("Area is rectangle1 {}", rectangle1.area());
}

fn sum_three(a: u32, b: u32, c: u32) -> u32 {
    a + b + c
}

fn min(a: u32, b: u32) -> u32 {
    if a < b {
        a
    } else {
        b
    }
}

fn min2(a: u32, b: u32, c: u32) -> u32 {
    if (a <= b) & (a <= c) {
        a
    } else if (b <= a) & (b <= c) {
        b
    } else {
        c
    }
}

fn fib(mut a: felt252, mut b: felt252, mut n: felt252) -> felt252 {
    loop {
        if n == 0 {
            break a;
        }
        n -= 1;
        let temp = b;
        b = a + b;
        a = temp;
    }
}

fn sum_array(mut arr: Array<u32>) -> u32 {
    let mut sum = 0_u32;

    loop {
        match arr.pop_front() {
            Option::Some(current_value) => { sum += current_value },
            Option::None => { break; },
        }
    };
    sum
}

// fn return_len(arr: Array<u32>) -> u32 {
// fn return_len(arr: @Array<u32>) -> u32 {
fn return_len(arr: Span<u32>) -> u32 {
    arr.len()
}

fn sum_array2(mut arr: Span<u32>) -> u32 {
    let mut sum: u32 = 0;

    loop {
        match arr.pop_front() {
            Option::Some(current_value) => { sum += *current_value },
            Option::None => { break; },
        }
    };
    sum
}

fn sum_array3(ref arr: Array<u32>) -> u32 {
    let mut sum: u32 = 0;

    loop {
        match arr.pop_front() {
            Option::Some(current_value) => { sum += current_value },
            Option::None => { break; },
        }
    };
    sum
}

fn area(rectangle: @Rectangle) -> u64 {
    *rectangle.width * *rectangle.height
}

impl RectangleDisplay of core::fmt::Display<Rectangle> {
    fn fmt(self: @Rectangle, ref f: core::fmt::Formatter) -> Result<(), core::fmt::Error> {
        write!(f, "width: ")?;
        core::fmt::Display::fmt(self.width, ref f)?;
        write!(f, ", height: ")?;
        core::fmt::Display::fmt(self.height, ref f)
    }
}

impl RectangleImpl of RectangleTrait {
    fn area(self: @Rectangle) -> u64 {
        *self.width * *self.height
    }
}

#[cfg(test)]
mod tests {
    use super::sum_three;

    #[test]
    fn it_works() {
        assert(sum_three(1, 2, 3) == 6, 'Sum Fail');
        assert_eq!(sum_three(1, 2, 3), 6);
        assert_eq!(sum_three(10, 20, 30), 60);
    }
}
// å½“æˆ‘ä»¬ä½¿ç”¨ç®€å•ç±»å‹ ï¼ˆu8 u16 u32ï¼‰ æ—¶ï¼Œ ä¸éœ€è¦å…³æ³¨æ‰€æœ‰æƒç±»å‹ï¼Œåªæœ‰æŠ¥é”™çš„æ—¶å€™æ‰å…³æ³¨
// å½“é‡åˆ°æ‰€æœ‰æƒçš„æ—¶å€™ï¼Œä¸æƒ³æ”¹å˜åˆ™ä½¿ç”¨ @ Span å¿«ç…§ç±»å‹  ä¿®æ”¹åˆ™ä½¿ç”¨ ref è¦æ±‚æ˜¯å¯å˜çš„å˜é‡ ä½¿ç”¨ mut 

```

### 2024.09.26

<https://learnblockchain.cn/article/9415>
Transactions
transaction æ˜¯ç”±ä½ çš„é’±åŒ…å‘èµ·çš„ï¼Œå¯ä»¥æ˜¯æ™ºèƒ½æ‰‹æœºæˆ–ç¬”è®°æœ¬ç”µè„‘ä¸­çš„é’±åŒ…
ä½ ç­¾ç½²ä¸€ç¬”äº¤æ˜“ï¼Œå¹¶å°†å…¶å‘é€åˆ°Starknet ä¸Š
æ¥å—è¯¥äº¤æ˜“çš„ Starknet èŠ‚ç‚¹ç§°ä¸º Sequencer æ’åºå™¨
ç›®å‰ Starknet åªæœ‰ä¸€ä¸ªæ’åºå™¨ï¼Œå®ƒå…·æœ‰ç±»ä¼¼å†…å­˜æ± çš„åŠŸèƒ½
æ¥æ”¶ä½ çš„äº¤æ˜“ï¼Œå¹¶åœ¨å®é™…æ‰§è¡Œäº¤æ˜“å‰è¿›è¡Œä¸€äº›åŸºæœ¬çš„äº¤æ˜“éªŒè¯
ç”±äºStarknet æ™ºèƒ½åˆçº¦å®é™…ä¸Šæ—¶ Cairo ç¨‹åºï¼Œå› æ­¤å¿…é¡»åœ¨Cairo è™šæ‹Ÿæœºä¸Šæ‰§è¡Œ
äº¤æ˜“ä»å†…å­˜æ± å‘é€åˆ°Cairoè™šæ‹Ÿæœºï¼Œä¸€æ—¦æ‰§è¡Œå®Œæˆï¼Œè¯¥æ‰§è¡Œçš„ trace ä¼šå‘é€åˆ°è¯æ˜å™¨ï¼Œæˆ‘ä»¬ç§°å…¶ä¸º SHARP
è¢«ç§°ä¸º SHARPçš„åŸå› æ˜¯å®ƒä¸åªæ˜¯ç»™ Starknet ä½¿ç”¨ï¼Œä¹Ÿç»™STARKEx ä½¿ç”¨
`SHARPÂ· ä¸­çš„è¯æ˜æ¨¡å—åˆ›å»ºäº†æœ‰æ•ˆæ€§è¯æ˜ï¼Œç¡®ä¿å…¶è®¡ç®—çš„å®Œæ•´æ€§
äº¤æ˜“æ‰§è¡Œçš„ç»“æœï¼Œæœ‰æ•ˆæ€§è¯æ˜ä¼šå‘é€åˆ°ä»¥å¤ªåŠä¸Šä¸€ä¸ªåä¸ºéªŒè¯å™¨çš„æ™ºèƒ½åˆçº¦ï¼Œå¦‚æœéªŒè¯å™¨è®¤ä¸ºæ­¤è¯æ˜æ­£ç¡®ï¼Œåˆ™è¯¥æ‰§è¡Œç»“æœå°±æ˜¯æ­£ç¡®çš„ã€‚

### 2024.09.27

Tx ç”Ÿå‘½å‘¨æœŸ
ä½ å‘é€ä¸€ç¬”äº¤æ˜“ï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œç­¾ç½²ï¼Œç„¶åè¯¥äº¤æ˜“è¢«å‘é€åˆ°å†…å­˜æ± ï¼Œå†…å­˜æ± ä¼šæ£€æŸ¥è¯¥äº¤æ˜“ç»“æ„æ˜¯å¦æ­£ç¡®ã€å­—æ®µæ˜¯å¦æ­£ç¡®ä»¥åŠæ ¼å¼æ˜¯å¦æ­£ç¡®
å½“äº¤æ˜“è¢«ç¡®è®¤æ—¶ï¼ŒStarknet å°±ä¼šæ¥æ”¶å®ƒï¼Œ è¿™æ—¶å€™å®ƒçš„çŠ¶æ€å°±ä¼šå˜æˆ RECEIVED
å¦‚æœå‘ç”ŸæŸäº›äº‹æƒ…ï¼Œæ¯”å¦‚æ™ºèƒ½æ‰‹æœºå’Œæ’åºå™¨ç›´æ¥çš„è¿æ¥ä¸­æ–­äº†ï¼Œä½ çš„äº¤æ˜“å°†è¢«å¿½ç•¥ï¼Œæ•…å®ƒçš„çŠ¶æ€ä¼šå˜æˆ IGNORED
è¿™ä¸ªçŠ¶æ€å¹¶ä¸æ˜¯ä¸€ä¸ªæ ‡å‡†çŠ¶æ€ï¼Œå®ƒæ„å‘³ç€Starknetä¸ä¼šçŸ¥é“ä½ çš„äº¤æ˜“
æœ‰å¯èƒ½å‘ç”Ÿäº¤æ˜“å·²ç»åˆ°äº†å†…å­˜æ± ï¼Œä½†å› ä¸ºæ ¼å¼ä¸æ­£ç¡®ï¼Œæ¯”å¦‚ä½¿ç”¨äº†é”™è¯¯çš„å®¢æˆ·ç«¯æˆ–SDKã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒSequencer æ’åºå™¨ä¼šå¿½ç•¥è¯¥äº¤æ˜“ï¼Œä¸ä¼šè§£æå…¶ä¸­çš„æ•°æ®ã€‚
å¦‚æœäº¤æ˜“æ ¼å¼æ­£ç¡®ï¼Œè¢«æ’åºå™¨å’Œå†…å­˜æ± æ¥æ”¶ï¼Œä¸‹ä¸€æ­¥å°±åˆ°ç­¾åéªŒè¯é˜¶æ®µäº†ï¼Œæ¯ç¬”äº¤æ˜“éƒ½å¿…é¡»ç­¾åï¼Œå¦‚æœç­¾åä¸æ­£ç¡®ï¼Œæ„å‘³ç€å®ƒçš„å…¬ç§é’¥ä¸å¯¹åº”ï¼Œäº¤æ˜“ä¼šè¢«æ‹’ç»ã€‚å¦‚æœç­¾åæœ‰æ•ˆï¼Œå®ƒå°±ç»§ç»­åœ¨CairoVM è™šæ‹Ÿæœºä¸­è¿è¡Œã€‚
å¦‚æœæ’åºå™¨èƒ½æˆåŠŸä½¿ç”¨ CairoVM æ‰§è¡Œè¯¥äº¤æ˜“ï¼Œå®ƒçš„çŠ¶æ€ä¼šå˜ä¸ºACCEPTEN_ON_L2ã€‚ä¹Ÿå°±æ˜¯åœ¨L2 ä¸Šè¢«æ¥å—ã€‚è¿™å°±æ˜¯åœ¨L2 ä¸Šæœ€ç»ˆè¢«ç¡®è®¤çš„çŠ¶æ€ã€‚æ˜¯åœ¨Starknet ä¸Šæ‰§è¡Œä½ çš„äº¤æ˜“åç½‘ç»œçš„æ–°çŠ¶æ€ã€‚
å¦‚æœåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”ŸæŸäº›äº‹æƒ…ï¼Œä¾‹å¦‚ã€ç‡ƒæ°”è€—å°½æˆ–è€…æ–­è¨€é”™è¯¯ï¼Œäº¤æ˜“å°†åœæ­¢å¹¶æ‰§è¡Œå›æ»šã€‚ä½†ä½ ä»ç„¶ä¼šè¢«æ”¶å–æ‰§è¡Œäº¤æ˜“ä»å‘ç”Ÿåˆ°å›æ»šå“ªä¸€åˆ»äº§ç”Ÿçš„è´¹ç”¨ï¼Œæœ€ç»ˆçš„çŠ¶æ€ä¼šå˜ä¸º REVERTEDã€‚
æ— è®ºäº¤æ˜“æˆåŠŸæˆ–å¤±è´¥ï¼Œæœ€ç»ˆéƒ½ä¼šç”Ÿæˆ traceï¼Œå¹¶å‘é€ç»™è¯æ˜è€…ï¼Œè¯æ˜è€…ä¼šç”Ÿæˆæœ‰æ•ˆè¯æ˜ï¼Œå¦‚æœè¢«ä»¥å¤ªåŠæ¥å—ï¼Œäº¤æ˜“çŠ¶æ€å°†å˜ä¸ºACCEPTED_ON_L1ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ L1 ä¸Šè¢«æ¥å—ã€‚
æ€»ç»“ï¼šä½ çš„äº¤æ˜“é¦–å…ˆè¢«å†…å­˜æ± æ¥æ”¶å¹¶ç¡®è®¤ï¼Œå¦‚æœç»“æ„æ­£ç¡®ï¼Œé€šè¿‡ç­¾åéªŒè¯ï¼Œå®ƒå°†è¿›å…¥CairoVM è™šæ‹Ÿæœºæ‰§è¡Œï¼Œå¦‚æœæ‰§è¡Œå¤±è´¥ï¼Œäº¤æ˜“å°†è¢«æ‹’ç»ã€‚å¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œäº¤æ˜“å°†è·å¾—åœ¨L2 ä¸Šè¢«æ¥å—çš„çŠ¶æ€ï¼Œå³ ACCEPTED_ON_L2ã€‚å¹¶åœ¨L2 ä¸Šè¾¾åˆ°æœ€ç»ˆç¡®è®¤ã€‚æœ‰æ•ˆæ€§è¯æ˜ç”Ÿæˆåå‘é€ç»™ä»¥å¤ªåŠçš„éªŒè¯å™¨ï¼Œå¦‚æœè¢«æ¥å—ï¼Œäº¤æ˜“çŠ¶æ€å°†å˜ä¸ºåœ¨L1ä¸Šè¢«æ¥å—ï¼Œå³ ACCEPTED_ON_L1ã€‚è¿™å°±æ˜¯æ•´ä¸ªç”Ÿå‘½å‘¨æœŸ

Tx ç±»å‹
å£°æ˜ Declare

åœ¨ SN æ³¨å†Œæ–°çš„ç±»
è°ƒç”¨ Invoke

æ‰§è¡Œ write å‡½æ•°
éƒ¨ç½²è´¦æˆ· deploy_account

éƒ¨ç½²è´¦æˆ·åˆçº¦
å‡è®¾æ€§éƒ¨ç½² - éƒ¨ç½²è´¦æˆ·åˆçº¦
æ²¡æœ‰è´¦æˆ·åˆçº¦çš„å‰æä¸‹å¦‚ä½•éƒ¨ç½²è´¦æˆ·åˆçº¦

é¢„å…ˆè®¡ç®—åˆçº¦åœ°å€
ç»™è¿™ä¸ªåœ°å€å‘é€èµ„é‡‘
å‘é€ deploy_account tx
åºåˆ—å™¨æ‰£å‡ gas åéƒ¨ç½²
éƒ¨ç½²è´¦æˆ·åˆçº¦ä¸å¸¸è§„çš„æ™ºèƒ½åˆçº¦æ˜¯ä¸åŒçš„

è¦éƒ¨ç½²æ™ºèƒ½åˆçº¦ä½ éœ€è¦å…ˆæœ‰æ™ºèƒ½é’±åŒ…

### 2024.09.28

### ä¸»é¢˜

1. è®¾ç½®å¼€å‘å·¥å…·
2. åˆçº¦ç±»å’Œå®ä¾‹
3. åˆçº¦å‰–æ
4. å®æˆ˜

### è®¾ç½®å¼€å‘å·¥å…·

#### `Scarb`çš„ä»‹ç»ä¸å®‰è£…

- åŒ…ç®¡ç†
- å¤„ç†ä¾èµ–
- é¡¹ç›®ç¼–è¯‘
- ä¸ Foundry é›†æˆ

- <https://asdf-vm.com/guide/getting-started.html>
- <https://www.cairo-lang.org/tutorial/>

```shell
brew install asdf

asdf plugin add scarb 
asdf install scarb latest 
asdf global scarb latest

scarb --version
```

#### `Starknet Foundry`

ä¸“ä¸º `Starknet` åˆçº¦çš„å¼€å‘å’Œæµ‹è¯•è€Œè®¾è®¡

ç»„æˆéƒ¨åˆ†ï¼š

- Forge
- Cast

<https://foundry-rs.github.io/starknet-foundry/index.html>

```shell
curl -L https://raw.githubusercontent.com/foundry-rs/starknet-foundry/master/scripts/install.sh | sh

snfoundryup

asdf plugin add starknet-foundry
asdf install starknet-foundry latest

snforge --version
sncast --version

```

### [Universal-Sierra-Compiler update](https://foundry-rs.github.io/starknet-foundry/getting-started/installation.html#universal-sierra-compiler-update)

If you would like to bump the USC manually (e.g. when the new Sierra version is released) you can do it by running:

```shell
curl -L https://raw.githubusercontent.com/software-mansion/universal-sierra-compiler/master/scripts/install.sh | sh
```

### 2 åˆçº¦ç±»å’Œå®ä¾‹

#### åˆçº¦ç±»

Contract Class

- Code (cairo => Compiled to sierra)
- ABI (which functions are accessible)
- Class HASH

å£°æ˜åˆçº¦ç”Ÿæˆç±»å“ˆå¸Œ

#### åˆçº¦å®ä¾‹

Contract instance

- Storage
- Associated class hash
- Contract ADDRESS

å·¥å‚æ¨¡å¼

READ => CALLS(free)

WRITE => INVOKE (it's a transaction = gas to pay)

| Declare | Invoke   | Deploy_account |
| ------- | -------- | -------------- |
| class   | instance | instance       |

å¯ä»¥ç”¨æ™ºèƒ½åˆçº¦åšä»€ä¹ˆ

- é“¾æ¸¸
- å¯éªŒè¯ç¥ç»ç½‘ç»œ
- AppChains
- zkEVM
- ...

### 3 æ™ºèƒ½åˆçº¦å‰–æ

#### æœ€åŸºæœ¬çš„åˆçº¦

```rust
#[starknet::contract]
mod CounterContract {
  
  #[storage]
  struct Storage {
    
  }
}
```

#### æ„é€ å‡½æ•°

```rust
#[starknet::contract]
mod CounterContract {
  #[storage]
  struct Storage {
    counter: u32,
  }
  
  #[constructor]
  fn constructor(ref self: ContractState, initial_counter: u32) {
    self.counter.write(initial_counter);
  }
}
```

#### ç‰¹å¾å®ç° trait

```rust
#[abi(embed_v0)]
impl CounterContract of super::ICounterContract<ContractState> {
  fn get_counter(self: @ContractState) -> u32 {
    self.counter.read()
  }
  
  fn increase_counter(ref self: ContractState) {
    let current_counter = self.counter.read();
    self.counter.write(current_counter + 1);
  }
}
```

#### ç‰¹å¾

```rust
#[starknet::interface]
trait ICounterContract<TContractState> {
  fn get_counter(self: @TContractState) -> u32;
  fn increase_counter(ref self: TContractState);
}
```

#### äº‹ä»¶

```rust
#[event]
#[derive(Drop, starknet::Event)]
enum Event {
  OwnershipTransferred: OwnershipTransferred,
}

#[derive(Drop, starknet::Event)]
struct OwnershipTransferred {
  #[key]
  previous_owner: ContractAddress,
  new_owner: ContractAddress,
}
```

#### Dispatcher

```rust
#[starknet::interface]
trait IData<T>{
  fn get_data(self: @T) -> felt252;
  fn set_data(ref self: T, data: felt252);
}

#[starknet::contract]
mod MyContract {
  use starknet::ContractAddress;
  use super::{IDataDispatcher, IDataDispatcherTrait};
  
  #[storage]
  struct Storage {
    
  }
  
  #[abi(embed_v0)]
  fn get_data_call(self: @ContractState, data_address: ContractAddress) -> felt252 {
    let dispatcher = IDataDispatcher {contract_address: data_address};
    dispatcher.get_data()
  }
}
```

#### ç»„ä»¶

```rust
#[starknet::interface]
trait IOwnable<TCcontractState> {
  // CODE
}

#[starknet::component]
mod ownable_component {
  #[storage]
  struct Storage {
    
  }
  
  #[event]
  #[derive(Drop, starknet::Event)]
  enum Event {
    OwnershipTransferred: OwnershipTransferred
  }
  
  #[derive(Drop, starknet::Event)]
  struct OwnershipTransferred {
    // CODE
  }
  
  #[embeddable_as(OwnableImpl)]
  impl Ownable<TContractState, +HasComponent<TContractState>> of super::IOwnable<ComponentState<TContractState>> {
    // CODE
  }
}
```

ç»„ä»¶ä¸èƒ½è¢«éƒ¨ç½²ï¼Œåªèƒ½åµŒå…¥åˆ°åˆçº¦ä¸­ï¼Œç§°ä¸ºåˆçº¦çš„ä¸€éƒ¨åˆ†

### 4 å®æˆ˜

<https://github.com/starknet-edu/counter-workshop>

ä½¿ç”¨vscode æ‰“å¼€å¹¶å®‰è£… `Cairo 1` æ‰©å±•

### 2024.09.29

åºåˆ—å™¨çš„è§’è‰²ç±»ä¼¼äºä»¥å¤ªåŠçš„éªŒè¯è€…ï¼Œä¸»è¦ä»»åŠ¡æ˜¯æ¥æ”¶ç”¨æˆ·çš„transactonï¼ŒæŒ‰é¡ºåºæ’åˆ—è¿™äº›transactionï¼Œå¤„ç†è¿™äº›transactionï¼Œç„¶åå°†å®ƒä»¬æ‰“åŒ…æˆå—ã€‚
åºåˆ—å™¨å¯¹transactionå¤„ç†çš„æ–¹æ³•åŒ…æ‹¬ï¼šæ’åºã€æ‰§è¡Œã€æ‰“åŒ…ä»¥åŠç”ŸæˆåŒºå—ã€‚
åºåˆ—å™¨éœ€è¦ä¸æ–­çš„å¿«é€Ÿçš„å¤„ç†transactionï¼Œå› æ­¤åºåˆ—å™¨éœ€è¦å¼ºå¤§ä¸”å¯é çš„è®¡ç®—åŸºç¡€è®¾æ–½ã€‚
Starknetçš„å‘å±•è·¯çº¿åŒ…æ‹¬å°†åºåˆ—å™¨çš„è§’è‰²å»ä¸­å¿ƒåŒ–ï¼Œä»è€Œæé«˜ç½‘ç»œçš„é²æ£’æ€§ï¼Œå¹¶å‡å°‘ä¸­å¿ƒåŒ–çš„é£é™©ã€‚

è¯æ˜å™¨ä¹Ÿæ˜¯Starknetä¸€ä¸ªéå¸¸å…³é”®çš„ç»„ä»¶ï¼Œè¯æ˜å™¨çš„èŒè´£åŒ…æ‹¬ï¼šæ¥æ”¶åŒºå—ã€å¤„ç†ç”Ÿæˆè¯æ˜ã€å°†è¯æ˜å‘é€åˆ°ä»¥å¤ªåŠã€‚
Starknetä¸­çš„è¯æ˜å™¨å……å½“äºŒæ¬¡éªŒè¯çš„è§’è‰²ï¼Œåœ¨åºåˆ—å™¨å¤„ç†å¹¶æ‰¹é‡å°†transactionæ‰“åŒ…æˆåŒºå—ä»¥åï¼Œè¿™äº›åŒºå—ä¼šä¼ é€’ç»™è¯æ˜å™¨ï¼Œè¯æ˜å™¨ä¼šé‡æ–°å¤„ç†è¿™äº›åŒºå—ï¼Œä»¥ç¡®ä¿æ‰€æœ‰çš„StarkNetå‡ä»¥æ­£ç¡®æ‰§è¡Œï¼Œç„¶åè¯æ˜å™¨ä¸ºæ¯ä¸ªåŒºå—ç”Ÿæˆè¯æ˜ï¼Œå¹¶å°†å®ƒä»¬å‘é€åˆ°ä»¥å¤ªåŠç½‘ç»œè¿›è¡ŒéªŒè¯ã€‚
è¿™ä¸ªæ­¥éª¤çš„è®¡ç®—é‡æ˜¯éå¸¸å·¨å¤§çš„ ï¼Œè¯æ˜å™¨è¢«è®¾è®¡ä¸ºå¤„ç†å¤æ‚ä»»åŠ¡çš„ä¸€ç§ç»„ä»¶ï¼Œå®ƒçš„å·¥ä½œå¯ä»¥æ˜¯å¼‚æ­¥çš„ï¼Œè¯æ˜å™¨çš„å·¥ä½œå¯ä»¥è¢«åˆ†æˆå¤šä¸ªéƒ¨åˆ†ï¼Œå…è®¸å¹¶è¡Œå¤„ç†å’Œé«˜æ•ˆçš„è¯æ˜ç”Ÿæˆï¼Œè¿™ç§çµæ´»æ€§çš„å·¥ä½œæ–¹å¼ä½¿å¾—è´Ÿè½½å¯ä»¥åœ¨å¤šä¸ªè¯æ˜å™¨ä¹‹é—´åˆ†é…ï¼Œæ¯ä¸ªè¯æ˜å™¨å¯ä»¥å¤„ç†ä¸åŒçš„åŒºå—ï¼Œå®ç°å¹¶è¡Œæ€§å’Œé«˜æ•ˆçš„è¯æ˜ç”Ÿæˆã€‚
åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»¥å¤ªåŠæ‰˜ç®¡äº†ä¸€ä¸ªèƒ½å¤ŸéªŒè¯è¿™äº›Starkè¯æ˜çš„æ™ºèƒ½åˆçº¦ï¼Œå¦‚æœè¯æ˜æœ‰æ•ˆï¼ŒstarkçŠ¶æ€æ ¹å°±ä¼šåœ¨L1ä¸Šæ›´æ–°ã€‚

### 2024.09.30

1. ABI æ–¹ä¾¿åˆçº¦è¿›è¡Œé“¾ä¸Šè°ƒç”¨ï¼Œè§„å®šç”¨æˆ·å¯è°ƒç”¨çš„å¤–éƒ¨å‡½æ•°
2. Storage å­˜å‚¨çŠ¶æ€ï¼Œæ­£å¸¸ç¨‹åºå¯ä»¥ç›´æ¥è°ƒç”¨æ“ä½œç³»ç»Ÿå†™å…¥ï¼Œè€ŒåŒºå—é“¾åˆ™éœ€è¦ä½¿ç”¨ç‰¹å®šæ“ä½œç æˆ–å‡½æ•°å†™å…¥
3. Event äº‹ä»¶ï¼Œä¸»è¦æ–¹ä¾¿äºé“¾ä¸‹ç´¢å¼•ï¼Œæ˜¯é¿å…é“¾ä¸ŠçŠ¶æ€ç©ºé—´è†¨èƒ€çš„é‡è¦æªæ–½
4. Constructor æ„é€ å™¨ï¼Œç”¨äºåˆçº¦åˆå§‹åŒ–

StarkNetä¸­çš„èŠ‚ç‚¹ä¸æ¯”ç‰¹å¸æˆ–ä»¥å¤ªåŠåŒºå—é“¾çš„èŠ‚ç‚¹ç›¸æ¯”ï¼Œæœ‰ç€ç‹¬ç‰¹çš„åŠŸèƒ½ã€‚
ä»¥å¤ªåŠä¸­çš„èŠ‚ç‚¹å……å½“ç½‘ç»œçš„å®¡è®¡è€…ï¼Œç»´æŠ¤ç€ç½‘ç»œçš„çŠ¶çŠ¶æ€ï¼Œä¾‹å¦‚æ¯ä¸ªå‚ä¸è€…æ‹¥æœ‰å¤šå°‘ETHï¼Œæˆ–è€…ç‰¹å®šæ™ºèƒ½åˆçº¦çš„å½“å‰çŠ¶æ€

èŠ‚ç‚¹é€šè¿‡å¤„ç†transactionï¼Œå¹¶ä¿å­˜æ‰€æœ‰çš„transactionè®°å½•æ¥å®ç°è¿™ä¸€ç‚¹ï¼ŒStarkNetèŠ‚ç‚¹ä¸ä¸€å®šéœ€è¦å¤„ç†æ‰€æœ‰transaction æ¥ç»´æŠ¤è¿™ç§çŠ¶æ€ã€‚

é€šå¸¸èŠ‚ç‚¹è®¿é—®ç½‘ç»œçŠ¶æ€æ•°æ®çš„ä¸‰ç§ä¸»è¦æ–¹æ³•åŒ…æ‹¬ï¼š
ç¬¬ä¸€ç§æ–¹æ³•æ˜¯é‡æ”¾æ—§çš„transactionï¼Œè¿™ç§æ–¹å¼ç±»ä¼¼äºä»¥å¤ªåŠæˆ–æ¯”ç‰¹å¸ï¼ŒèŠ‚ç‚¹å¯ä»¥å–èµ°æ‰€æœ‰çš„transactionï¼Œå¹¶é‡æ–°æ‰§è¡Œå®ƒä»¬ã€‚å°½ç®¡è¿™ç§æ–¹æ³•å‡†ç¡®ï¼Œä½†é™¤éä½ æ‹¥æœ‰èƒ½å¤Ÿå¤„ç†è¿™äº›è´Ÿè½½çš„å¼ºå¤§æœºå™¨ï¼Œå¦åˆ™å®ƒå¹¶ä¸å¯æ‰©å±•ã€‚å¦‚æœèƒ½é‡æ”¾æ‰€æœ‰çš„transactionï¼Œè¿™å°±å¯ä»¥ä½œä¸ºä¸€ä¸ªåºåˆ—å™¨ä½¿ç”¨äº†ã€‚

ç¬¬äºŒç§æ–¹æ³•æ˜¯ä¾èµ–L2çš„å…±è¯†ï¼Œæ‰€æœ‰èŠ‚ç‚¹ä¿¡ä»»åºåˆ—å™¨èƒ½å¤Ÿæ­£ç¡®çš„æ‰§è¡Œç½‘ç»œï¼Œè¿™ç§æ–¹æ³•å°±æ¶‰åŠåˆ°ä¸€äº›ä¿¡ä»»å‡è®¾ï¼Œä½†æ˜¯ä»–çš„èµ„æºéœ€æ±‚è¾ƒå°‘ã€‚ç›®å‰Stacknetå›´ç»•ä¸€ä¸ªåºåˆ—å™¨è¿›è¡Œï¼Œæ‰€ä»¥è¿™äº›èŠ‚ç‚¹æ˜¯ä¿¡ä»»Stackware ä¸ä¼šç ´åç½‘ç»œçš„ã€‚

ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯åœ¨L1ä¸Šæ£€æŸ¥è¯æ˜å¹¶éªŒè¯ï¼ŒèŠ‚ç‚¹å‘¢å¯ä»¥é€šè¿‡è§‚å¯ŸL1ï¼Œå¹¶ç¡®ä¿æ¯æ¬¡å‘é€è¯æ˜èƒ½æ”¶åˆ°æ›´æ–°çš„çŠ¶æ€æ¥ç›‘æ§ç½‘ç»œçš„çŠ¶æ€ï¼Œè¿™æ ·ä»–ä»¬ä¸å¿…ä¿¡ä»»ä»»ä½•äººï¼Œåªéœ€è¦è·Ÿè¸ªStarkNetä¸Šæœ€æ–°çš„æœ‰æ•ˆçš„transactionå°±å¯ä»¥ã€‚

### 2024.10.01

ç¬”è®°å†…å®¹

### 2024.10.02

ç¬”è®°å†…å®¹

### 2024.10.03

ç¬”è®°å†…å®¹

### 2024.10.04

ç¬”è®°å†…å®¹

### 2024.10.05

ç¬”è®°å†…å®¹

### 2024.10.06

ç¬”è®°å†…å®¹

### 2024.10.07

ç¬”è®°å†…å®¹

### 2024.10.08

ç¬”è®°å†…å®¹

### 2024.10.09

ç¬”è®°å†…å®¹

### 2024.10.10

ç¬”è®°å†…å®¹

### 2024.10.11

ç¬”è®°å†…å®¹

### 2024.10.12

ç¬”è®°å†…å®¹

<!-- Content_END -->
